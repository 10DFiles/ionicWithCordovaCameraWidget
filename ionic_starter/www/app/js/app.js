/**
 *
 * @author Geppetto Generated Code</br>
 * Date Created: </br>
 * @since  </br>
   build:   </p>
 *
 * code was generated by the Geppetto System </br>
 * Geppetto system Copyright - NewPortBay LLC </br>
 * The generated code is free to use by anyone</p>
 *
 *
 *
*/

app = angular.module('Testcamera', ['ionic','ngCordova','ionic-datepicker','ngCordova'])

.config(function($stateProvider, $urlRouterProvider) {

  $stateProvider

  // setup an abstract state for the tabs directive
    .state('app', {
    url: '/app',
    abstract: true,
    templateUrl: 'app/views/menu.html'
  })

    .state('app.landing_page-en', {
      url: '/landing_page-en',
      views: {
        'menuContent': {
          templateUrl: 'app/views/en/landing_page-en.html'
        }
      }
    })

    .state('app_level', {
      url: '/app_level',
  controller: 'AplicationLevelCtrl', cache: false
    })

    .state('app.Screen_Summa-en', {
      url: '/Screen_Summa-en',
      views: {
        'menuContent': {
          templateUrl: 'app/views/en/Screen_Summa-en.html',
  controller: 'SummaTest'
        }
      }
    })

  // if none of the above states are matched, use this as the fallback
  $urlRouterProvider.otherwise('app_level');


})

.run(function($ionicPlatform,$cordovaSQLite,$rootScope) {
  $rootScope.env = "DEV";
  $ionicPlatform.ready(function() {
    // Hide the accessory bar by default (remove this to show the accessory bar above the keyboard
    // for form inputs)
    if (window.cordova && window.cordova.plugins.Keyboard) {
      cordova.plugins.Keyboard.hideKeyboardAccessoryBar(true);
      cordova.plugins.Keyboard.disableScroll(true);

    }
    if (window.StatusBar) {
      // org.apache.cordova.statusbar required
      StatusBar.styleDefault();
    }
    //var db = window.sqlitePlugin.openDatabase( {name: "Testcamera.db", location:2} );  
    //var db = window.sqlitePlugin.openDatabase( {name: "Testcamera.db", location:'default', iosDatabaseLocation:'Library'});
    var db = window.openDatabase("Testcamera.db", '1', 'Testcamera', 1024 * 1024 * 100);
    $rootScope.db=db;

    $cordovaSQLite.execute(db, "CREATE TABLE SummaNoun(id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,name text,degree text,dateofjioning Date,profilepic text,ctc decimal(25,4),mic bigint);");
  });
})

.controller('MainCtrl', ['$scope', function($scope) {
	$scope.hideSidemenuBackButton = true;
	var top_menu_items;
	top_menu_items = $scope.menu_items = 
[

	{
		is_first_level: true,
		name: "SummaTest",
		label: "SummaTestLabel",
		id: 471,
		screens: [
			{
				id: 446,
				is_first_level: false,
				name: "Screen_Summa-en",
				label: "SummaScreen",
			}		]	},
	{
		is_first_level: true,
		name: "SummaNoun_Default_Activity",
		label: "SummaNoun_Default_Activity",
		id: 472,
		screens: [		]	}
];
var getByParentId = function(id) {
	for (var i in top_menu_items) {
		if (top_menu_items[i].id == id) {
			return top_menu_items[i].screens;
		}
	}
}
$scope.showSubcategories = function(category) {
	$scope.menu_items = getByParentId(category.id);
	$scope.hideSidemenuBackButton = false;
};
$scope.showTopLevelCategories = function () {
	$scope.menu_items = top_menu_items;
	$scope.hideSidemenuBackButton = true;
};
}])
;